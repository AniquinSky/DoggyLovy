{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}{% endblock %}</h1>
{% endblock %}
{% block content %}
<div class="container-fluid p-0">
  <div id="header-carousel" class="carousel slide" data-ride="carousel" style="max-width: 50%; margin: auto;">
      <div class="carousel-inner">
          {% for pet in pets %}
          <div class="carousel-item {% if loop.index == 1 %}active{% endif %}">
              <img class="w-50" src="data:image/jpg;base64,{{ pet[7] }}" alt="Pet Image" style="box-shadow: none;">
              <div class="carousel-caption d-flex flex-column align-items-start justify-content-center" style="max-width: 450px; margin-left: auto; margin-right: 10px;">
                  <h3 class="text-white mb-3 d-none d-sm-block">{{ pet[1] }}</h3>
                  <h1 class="display-3 text-white mb-3">{{ pet[2] }}</h1>
                  <h5 class="text-white mb-3 d-none d-sm-block">{{ pet[3] }}</h5>
                  <small class="mr-3"><i class="fa fa-thumbs-up text-success"></i> {{ pet[6] }}</small>
                  <div class="mt-3">
                      <button type="submit" onclick="sendValorationSignal('like', '{{ pet[0] }}')" class="btn btn-success btn-sm">Like</button>
                      <button type="submit" onclick="sendValorationSignal('dislike', '{{ pet[0] }}')" class="btn btn-danger btn-sm">Dislike</button>
                  </div>
                  <a class="font-weight-bold" href="{{ url_for('chat.chatRoom', other_user_id=pet[8]) }}">Entablar chat con el dueño.</a>
              </div>
          </div>
          {% endfor %}
      </div>
      <a class="carousel-control-prev" href="#header-carousel" data-slide="prev">
          <div class="btn btn-primary rounded" style="width: 22.5px; height: 45px;">
              <span class="carousel-control-prev-icon mb-n2"></span>
          </div>
      </a>
      <a class="carousel-control-next" href="#header-carousel" data-slide="next">
          <div class="btn btn-primary rounded" style="width: 22.5px; height: 45px;">
              <span class="carousel-control-next-icon mb-n2"></span>
          </div>
      </a>
  </div>
</div>

<!--<div class="container-fluid p-0">
  <div id="header-carousel" class="carousel slide" data-ride="carousel" style="max-width: 50%; margin: auto;">
      <div class="carousel-inner">
          <div class="carousel-item active">

            <img class="w-50" src="{{ url_for('static', filename='img/carousel-1.jpg')}}" alt="Image">           
              <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
                  <div class="p-3" style="max-width: 450px;">
                      <h3 class="text-white mb-3 d-none d-sm-block">Porque todos merecen encontrar </h3>
                      <h1 class="display-3 text-white mb-3">a su compañero </h1>
                      <h5 class="text-white mb-3 d-none d-sm-block">peludo perfecto.</h5>
                  </div>
              </div>
          </div>

          <div class="carousel-item">
              <img class="w-50" src="{{ url_for('static', filename='img/carousel-2.jpg')}}" alt="Image">
              <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
                  <div class="p-3" style="max-width: 450px;">
                      <h3 class="text-white mb-3 d-none d-sm-block">Conectamos </h3>
                      <h1 class="display-3 text-white mb-3">corazones peludos</h1>
                      <h5 class="text-white mb-3 d-none d-sm-block">en busca de amor.</h5>
                  </div>
              </div>
          </div>
      </div>
      <a class="carousel-control-prev" href="#header-carousel" data-slide="prev">
          <div class="btn btn-primary rounded" style="width: 22.5px; height: 45px;">
              <span class="carousel-control-prev-icon mb-n2"></span>
          </div>
      </a>
      <a class="carousel-control-next" href="#header-carousel" data-slide="next">
          <div class="btn btn-primary rounded" style="width: 22.5px; height: 45px;">
              <span class="carousel-control-next-icon mb-n2"></span>
          </div>
      </a>
  </div>
</div>
-->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
<link href="{{ url_for('static', filename='lib/flaticon/font/flaticon.css') }}" rel="stylesheet"/> 
<script src="{{ url_for('static', filename='lib/easing/easing.min.js') }}"></script>

<script src="{{ url_for('static', filename='lib/owlcarousel/owl.carousel.min.js') }}"></script>
<script src="{{ url_for('static', filename='lib/tempusdominus/js/moment.min.js') }}"></script>
<script src="{{ url_for('static', filename='lib/tempusdominus/js/moment-timezone.min.js') }}"></script>
<script src="{{ url_for('static', filename='lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js') }}"></script>
<script src="https://cdn.socket.io/4.7.2/socket.io.js" crossorigin="anonymous"></script>
<script>
  const socket = io('http://127.0.0.1:5000/socket');

  socket.on('connect', () => {
    console.log('Connected to server');
  });

  socket.on('disconnect', () => {
    console.log('Disconnected from server');
  });

  socket.on('response', (data) => {
    console.log('Received response:', data);
  });

  function sendValorationSignal(valoration, petId) {
    socket.emit('petValoration', { valoration: valoration, petId: petId })
  }
</script>
{% endblock %}
